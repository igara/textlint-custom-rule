{"version":3,"file":"index.js","names":["writing","writingJSON","ngWords","Object","keys","report","context","Syntax","RuleError","fixer","getSource","Str","node","text","ngWordFilter","filter","ng","reg","RegExp","test","length","forEach","ngWord","ignore","index","search","replace","replaceTextRange","ok","ruleError","fix"],"sources":["../src/index.ts"],"sourcesContent":["import { TextlintRuleModule } from '@textlint/types';\n\nimport writingJSON from '../writing.json';\nconst writing = writingJSON as any;\nconst ngWords = Object.keys(writing);\n\nexport interface Options {\n  // if the Str includes `allows` word, does not report it\n  allows?: string[];\n}\n\nconst report: TextlintRuleModule<Options> = (context) => {\n  const { Syntax, RuleError, report, fixer, getSource } = context;\n\n  return {\n    [Syntax.Str](node) {\n      const text = getSource(node);\n\n      const ngWordFilter = ngWords.filter((ng) => {\n        const reg = new RegExp(ng, 'g');\n        return reg.test(text);\n      });\n\n      if (!ngWordFilter.length) return;\n\n      ngWordFilter.forEach((ngWord) => {\n        if (!writing[ngWord]) return;\n\n        const ng = writing[ngWord];\n\n        const ignore = ng.ignore;\n        if (ignore) {\n          const reg = new RegExp(ignore, 'g');\n          if (reg.test(text)) return;\n        }\n\n        const index = text.search(ngWord);\n        const length = ngWord.length;\n        const replace = fixer.replaceTextRange([index, index + length], ng.ok);\n\n        const ruleError = new RuleError(`${ngWord} -> ${ng.ok}`, {\n          index,\n          fix: replace,\n        });\n        report(node, ruleError);\n      });\n    },\n  };\n};\nexport default report;\n"],"mappings":";;;;;;;AAEA;;;;AACA,IAAMA,OAAO,GAAGC,gBAAhB;AACA,IAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYJ,OAAZ,CAAhB;;AAOA,IAAMK,MAAmC,GAAIC,OAAD,IAAa;EACvD,IAAM;IAAEC,MAAF;IAAUC,SAAV;IAAqBH,MAArB;IAA6BI,KAA7B;IAAoCC;EAApC,IAAkDJ,OAAxD;EAEA,OAAO;IACL,CAACC,MAAM,CAACI,GAAR,EAAaC,IAAb,EAAmB;MACjB,IAAMC,IAAI,GAAGH,SAAS,CAACE,IAAD,CAAtB;MAEA,IAAME,YAAY,GAAGZ,OAAO,CAACa,MAAR,CAAgBC,EAAD,IAAQ;QAC1C,IAAMC,GAAG,GAAG,IAAIC,MAAJ,CAAWF,EAAX,EAAe,GAAf,CAAZ;QACA,OAAOC,GAAG,CAACE,IAAJ,CAASN,IAAT,CAAP;MACD,CAHoB,CAArB;MAKA,IAAI,CAACC,YAAY,CAACM,MAAlB,EAA0B;MAE1BN,YAAY,CAACO,OAAb,CAAsBC,MAAD,IAAY;QAC/B,IAAI,CAACtB,OAAO,CAACsB,MAAD,CAAZ,EAAsB;QAEtB,IAAMN,EAAE,GAAGhB,OAAO,CAACsB,MAAD,CAAlB;QAEA,IAAMC,MAAM,GAAGP,EAAE,CAACO,MAAlB;;QACA,IAAIA,MAAJ,EAAY;UACV,IAAMN,GAAG,GAAG,IAAIC,MAAJ,CAAWK,MAAX,EAAmB,GAAnB,CAAZ;UACA,IAAIN,GAAG,CAACE,IAAJ,CAASN,IAAT,CAAJ,EAAoB;QACrB;;QAED,IAAMW,KAAK,GAAGX,IAAI,CAACY,MAAL,CAAYH,MAAZ,CAAd;QACA,IAAMF,MAAM,GAAGE,MAAM,CAACF,MAAtB;QACA,IAAMM,OAAO,GAAGjB,KAAK,CAACkB,gBAAN,CAAuB,CAACH,KAAD,EAAQA,KAAK,GAAGJ,MAAhB,CAAvB,EAAgDJ,EAAE,CAACY,EAAnD,CAAhB;QAEA,IAAMC,SAAS,GAAG,IAAIrB,SAAJ,WAAiBc,MAAjB,iBAA8BN,EAAE,CAACY,EAAjC,GAAuC;UACvDJ,KADuD;UAEvDM,GAAG,EAAEJ;QAFkD,CAAvC,CAAlB;QAIArB,MAAM,CAACO,IAAD,EAAOiB,SAAP,CAAN;MACD,CApBD;IAqBD;;EAhCI,CAAP;AAkCD,CArCD;;eAsCexB,M"}